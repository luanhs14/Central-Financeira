{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1 class="page-title">ðŸ“ˆ HistÃ³rico de Rendimentos</h1>

    <div class="filter-section">
        <h3>Filtros:</h3>
        <div class="date-filters">
            <div class="form-group">
                <label for="start-date">Data Inicial:</label>
                <input type="date" id="start-date" class="form-control">
            </div>
            <div class="form-group">
                <label for="end-date">Data Final:</label>
                <input type="date" id="end-date" class="form-control">
            </div>
        </div>
        <div class="indicator-filters">
            <label>Mostrar Indicadores:</label>
            <div class="checkbox-group">
                <label><input type="checkbox" name="asset" value="selic" checked> SELIC</label>
                <label><input type="checkbox" name="asset" value="cdi" checked> CDI</label>
                <label><input type="checkbox" name="asset" value="dolar" checked> DÃ³lar</label>
                <label><input type="checkbox" name="asset" value="bitcoin" checked> Bitcoin</label>
                <label><input type="checkbox" name="asset" value="ibovespa" checked> Ibovespa</label>
                <label><input type="checkbox" name="asset" value="sp500" checked> S&P 500</label>
                <label><input type="checkbox" name="asset" value="ifix" checked> IFIX</label>
                <label><input type="checkbox" name="asset" value="inpc" checked> INPC</label>
                <label><input type="checkbox" name="asset" value="ipca" checked> IPCA</label>
                <label><input type="checkbox" name="asset" value="poupanca" checked> PoupanÃ§a</label>
            </div>
        </div>
        <button id="apply-filters-btn" class="btn">Aplicar Filtros</button>
    </div>

    <div class="chart-container">
        <canvas id="historicoChart"></canvas>
    </div>

    <div class="table-responsive">
        <table id="historico-table" class="historico-table">
            <thead>
                <tr id="historico-table-header-row">
                    <th>Data</th>
                    <th>SELIC</th>
                    <th>CDI</th>
                    <th>DÃ³lar</th>
                    <th>Bitcoin</th>
                    <th>Ibovespa</th>
                    <th>S&P 500</th>
                    <th>IFIX</th>
                    <th>INPC</th>
                    <th>IPCA</th>
                    <th>PoupanÃ§a</th>
                </tr>
            </thead>
            <tbody id="historico-body">
                <!-- Dados preenchidos dinamicamente via JavaScript -->
            </tbody>
        </table>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        fetchHistoricoData();
        document.getElementById('apply-filters-btn').addEventListener('click', fetchHistoricoData);
    });
</script>
{% endblock %}